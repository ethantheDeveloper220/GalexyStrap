<base:WpfUiWindow x:Class="Voidstrap.UI.Elements.Dialogs.ConfigBackupDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:controls="clr-namespace:Voidstrap.UI.Elements.Controls"
        xmlns:base="clr-namespace:Voidstrap.UI.Elements.Base"
        mc:Ignorable="d"
        Title="GalaxyStrap Configuration Backup &amp; Restore" 
        Height="600"
        Width="800"
        ResizeMode="CanResize"
        Background="{ui:ThemeResource ApplicationBackgroundBrush}"
        ExtendsContentIntoTitleBar="True"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#1A0000" Offset="0"/>
                <GradientStop Color="#330000" Offset="0.5"/>
                <GradientStop Color="#1A0000" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Grid x:Name="ImageBackgroundLayer" Panel.ZIndex="-1" Visibility="{Binding IsImageMode, Converter={StaticResource BooleanToVisibilityConverter}}" Grid.RowSpan="3">
            <Border Background="{DynamicResource WindowBackgroundImage}" />
            <Border Background="{DynamicResource WindowBackgroundBlackOverlay}" />
        </Grid>

        <ui:TitleBar Grid.Row="0" Padding="8" Title="GalaxyStrap Configuration Backup &amp; Restore" Icon="ArrowExportLtr24" ShowMinimize="False" ShowMaximize="False" CanMaximize="False" KeyboardNavigation.TabNavigation="None" />
        
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel Margin="16">
                
                <!-- Header -->
                <TextBlock Text="Configuration Manager" FontSize="28" FontWeight="Bold" Margin="0,0,0,8" Foreground="#FFEEEE"/>
                <TextBlock Text="Export and import your complete GalaxyStrap configuration including settings, FastFlags, and preferences" 
                           FontSize="14" Foreground="#FFCCCC" Margin="0,0,0,24" TextWrapping="Wrap"/>

                <!-- Export Section -->
                <Border Background="#15FF0000" CornerRadius="12" BorderBrush="#40FF0000" BorderThickness="1" Padding="20" Margin="0,0,0,16">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <ui:SymbolIcon Symbol="ArrowExportLtr24" FontSize="20" Foreground="#FF6666" Margin="0,0,8,0"/>
                            <TextBlock Text="Export Configuration" FontSize="20" FontWeight="SemiBold" Foreground="#FF6666" VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <TextBlock Text="Export your current configuration to a backup file:" 
                                   FontSize="14" Foreground="#FFCCCC" Margin="0,0,0,12" TextWrapping="Wrap"/>
                        
                        <controls:OptionControl 
                            Header="Include FastFlags" 
                            Description="Export all custom FastFlag configurations">
                            <ui:ToggleSwitch IsChecked="{Binding IncludeFastFlags, Mode=TwoWay}" />
                        </controls:OptionControl>

                        <controls:OptionControl 
                            Header="Include Settings" 
                            Description="Export application settings and preferences">
                            <ui:ToggleSwitch IsChecked="{Binding IncludeSettings, Mode=TwoWay}" />
                        </controls:OptionControl>

                        <controls:OptionControl 
                            Header="Include Mods" 
                            Description="Export installed mods and modifications">
                            <ui:ToggleSwitch IsChecked="{Binding IncludeMods, Mode=TwoWay}" />
                        </controls:OptionControl>

                        <controls:OptionControl 
                            Header="Include Themes" 
                            Description="Export custom themes and appearance settings">
                            <ui:ToggleSwitch IsChecked="{Binding IncludeThemes, Mode=TwoWay}" />
                        </controls:OptionControl>

                        <ui:Button 
                            Content="Export Configuration" 
                            Icon="ArrowExportLtr24" 
                            Click="ExportConfig_Click"
                            HorizontalAlignment="Stretch"
                            Margin="0,12,0,0"
                            FontWeight="Medium"
                            Appearance="Primary"/>
                    </StackPanel>
                </Border>

                <!-- Import Section -->
                <Border Background="#15FF0000" CornerRadius="12" BorderBrush="#40FF0000" BorderThickness="1" Padding="20" Margin="0,0,0,16">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <ui:SymbolIcon Symbol="ArrowImport24" FontSize="20" Foreground="#FF6666" Margin="0,0,8,0"/>
                            <TextBlock Text="Import Configuration" FontSize="20" FontWeight="SemiBold" Foreground="#FF6666" VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <TextBlock Text="Import a previously exported configuration file:" 
                                   FontSize="14" Foreground="#FFCCCC" Margin="0,0,0,12" TextWrapping="Wrap"/>
                        
                        <controls:OptionControl 
                            Header="Merge with Existing" 
                            Description="Merge imported config with current settings (otherwise replaces all)">
                            <ui:ToggleSwitch IsChecked="{Binding MergeConfig, Mode=TwoWay}" />
                        </controls:OptionControl>

                        <controls:OptionControl 
                            Header="Create Backup Before Import" 
                            Description="Automatically backup current config before importing">
                            <ui:ToggleSwitch IsChecked="{Binding BackupBeforeImport, Mode=TwoWay}" />
                        </controls:OptionControl>

                        <ui:Button 
                            Content="Import Configuration" 
                            Icon="ArrowImport24" 
                            Click="ImportConfig_Click"
                            HorizontalAlignment="Stretch"
                            Margin="0,12,0,0"
                            FontWeight="Medium"
                            Appearance="Primary"/>
                    </StackPanel>
                </Border>

                <!-- Status Section -->
                <Border Background="#15FF0000" CornerRadius="12" BorderBrush="#40FF0000" BorderThickness="1" Padding="20">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <ui:SymbolIcon Symbol="Info24" FontSize="20" Foreground="#FF6666" Margin="0,0,8,0"/>
                            <TextBlock Text="Status" FontSize="20" FontWeight="SemiBold" Foreground="#FF6666" VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <TextBlock x:Name="StatusText" 
                                   Text="Ready to export or import configuration" 
                                   FontSize="14" 
                                   Foreground="#FFCCCC" 
                                   TextWrapping="Wrap"/>
                        
                        <TextBlock x:Name="LastBackupText" 
                                   Text="" 
                                   FontSize="12" 
                                   Foreground="#FFAAAA" 
                                   Margin="0,8,0,0"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <Border Grid.Row="2" Margin="0,10,0,0" Padding="15" Background="#22FF0000" BorderBrush="#55FF0000" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" FlowDirection="LeftToRight" HorizontalAlignment="Right">
                <Button MinWidth="100" Content="Close" IsCancel="True" FontWeight="Medium" Click="Close_Click" />
            </StackPanel>
        </Border>
    </Grid>
</base:WpfUiWindow>
