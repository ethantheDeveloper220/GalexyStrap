<ui:UiWindow
    x:Class="Voidstrap.UI.Elements.Dialogs.WebhookManagerDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:models="clr-namespace:Voidstrap.Models"
    mc:Ignorable="d"
    Title="Webhook Manager"
    Width="900"
    Height="700"
    MinWidth="800"
    MinHeight="600"
    WindowStartupLocation="CenterScreen"
    ResizeMode="CanResize"
    ExtendsContentIntoTitleBar="True"
    WindowBackdropType="Mica">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Snackbar for notifications -->
        <ui:Snackbar x:Name="NotificationSnackbar"
                     Grid.RowSpan="2"
                     Margin="20"
                     Panel.ZIndex="100"
                     Timeout="3000"
                     VerticalAlignment="Bottom"
                     HorizontalAlignment="Center"/>

        <!-- Top Bar -->
        <Border Grid.Row="0" Background="{DynamicResource ApplicationBackgroundBrush}" 
                BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}" 
                BorderThickness="0,0,0,1" 
                Padding="20,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Vertical">
                    <TextBlock Text="Webhook Manager" 
                               FontSize="20" 
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <TextBlock Text="Manage up to 3 Discord webhooks and monitor activity" 
                               FontSize="12" 
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                               Margin="0,4,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <ui:Button x:Name="TestAllButton"
                               Content="Test All"
                               Icon="Send24"
                               Appearance="Primary"
                               Margin="0,0,10,0"
                               Click="TestAllButton_Click"/>
                    <ui:Button x:Name="SaveButton"
                               Content="Save"
                               Icon="Save24"
                               Click="SaveButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content with Tabs -->
        <TabControl Grid.Row="1" Margin="0" BorderThickness="0">
            
            <!-- Webhooks Tab -->
            <TabItem Header="Webhooks">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="250"/>
                    </Grid.RowDefinitions>

                    <!-- Webhook Slots -->
                    <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <!-- Webhook 1 -->
                            <ui:CardExpander x:Name="Webhook1Card" 
                                           Header="Webhook #1" 
                                           Icon="Globe24"
                                           IsExpanded="True"
                                           Margin="0,0,0,10">
                                <StackPanel Margin="10">
                                    <TextBlock Text="Webhook URL" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                    <ui:TextBox x:Name="Webhook1UrlBox" 
                                              PlaceholderText="https://discord.com/api/webhooks/..."
                                              Margin="0,0,0,10"/>
                                    
                                    <TextBlock Text="Webhook Name" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                    <ui:TextBox x:Name="Webhook1NameBox" 
                                              PlaceholderText="My Webhook"
                                              Margin="0,0,0,10"/>

                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <CheckBox x:Name="Webhook1EnabledCheck" 
                                                Content="Enabled" 
                                                IsChecked="True"
                                                VerticalAlignment="Center"/>
                                        
                                        <ui:Button Grid.Column="1"
                                                 Content="Test"
                                                 Icon="Send24"
                                                 Click="TestWebhook1_Click"/>
                                    </Grid>
                                </StackPanel>
                            </ui:CardExpander>

                            <!-- Webhook 2 -->
                            <ui:CardExpander x:Name="Webhook2Card" 
                                           Header="Webhook #2" 
                                           Icon="Globe24"
                                           Margin="0,0,0,10">
                                <StackPanel Margin="10">
                                    <TextBlock Text="Webhook URL" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                    <ui:TextBox x:Name="Webhook2UrlBox" 
                                              PlaceholderText="https://discord.com/api/webhooks/..."
                                              Margin="0,0,0,10"/>
                                    
                                    <TextBlock Text="Webhook Name" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                    <ui:TextBox x:Name="Webhook2NameBox" 
                                              PlaceholderText="My Webhook"
                                              Margin="0,0,0,10"/>

                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <CheckBox x:Name="Webhook2EnabledCheck" 
                                                Content="Enabled"
                                                VerticalAlignment="Center"/>
                                        
                                        <ui:Button Grid.Column="1"
                                                 Content="Test"
                                                 Icon="Send24"
                                                 Click="TestWebhook2_Click"/>
                                    </Grid>
                                </StackPanel>
                            </ui:CardExpander>

                            <!-- Webhook 3 -->
                            <ui:CardExpander x:Name="Webhook3Card" 
                                           Header="Webhook #3" 
                                           Icon="Globe24"
                                           Margin="0,0,0,10">
                                <StackPanel Margin="10">
                                    <TextBlock Text="Webhook URL" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                    <ui:TextBox x:Name="Webhook3UrlBox" 
                                              PlaceholderText="https://discord.com/api/webhooks/..."
                                              Margin="0,0,0,10"/>
                                    
                                    <TextBlock Text="Webhook Name" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                    <ui:TextBox x:Name="Webhook3NameBox" 
                                              PlaceholderText="My Webhook"
                                              Margin="0,0,0,10"/>

                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <CheckBox x:Name="Webhook3EnabledCheck" 
                                                Content="Enabled"
                                                VerticalAlignment="Center"/>
                                        
                                        <ui:Button Grid.Column="1"
                                                 Content="Test"
                                                 Icon="Send24"
                                                 Click="TestWebhook3_Click"/>
                                    </Grid>
                                </StackPanel>
                            </ui:CardExpander>
                        </StackPanel>
                    </ScrollViewer>

                    <GridSplitter Grid.Row="1" 
                                Height="5" 
                                HorizontalAlignment="Stretch" 
                                Background="Transparent"
                                Margin="0,5"/>

                    <!-- Activity Log -->
                    <ui:Card Grid.Row="2" Margin="0,5,0,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Grid Grid.Row="0" Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Text="Activity Log" 
                                         FontSize="14" 
                                         FontWeight="SemiBold"
                                         VerticalAlignment="Center"/>

                                <ui:Button Grid.Column="1"
                                         Content="Clear"
                                         Icon="Delete24"
                                         Click="ClearLog_Click"/>
                            </Grid>

                            <Border Grid.Row="1" 
                                  Background="{DynamicResource ControlFillColorDefaultBrush}"
                                  BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                                  BorderThickness="1"
                                  CornerRadius="4">
                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                    <TextBlock x:Name="ActivityLogText" 
                                             Text="No activity yet..."
                                             Padding="10"
                                             FontFamily="Consolas"
                                             FontSize="11"
                                             TextWrapping="Wrap"
                                             Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                </ScrollViewer>
                            </Border>
                        </Grid>
                    </ui:Card>
                </Grid>
            </TabItem>

            <!-- Buy & Paid Access Tab -->
            <TabItem Header="Buy &amp; Paid Access">
                <Grid Margin="40">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center" MaxWidth="500">
                        <ui:SymbolIcon Symbol="LockClosed24" 
                                     FontSize="48" 
                                     Filled="True"
                                     Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                                     HorizontalAlignment="Center"
                                     Margin="0,0,0,20"/>

                        <TextBlock Text="Pro License" 
                                 FontSize="24" 
                                 FontWeight="Bold"
                                 HorizontalAlignment="Center"
                                 Margin="0,0,0,10"/>

                        <TextBlock Text="Unlock premium features with a Pro license key" 
                                 FontSize="14" 
                                 Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                 HorizontalAlignment="Center"
                                 TextAlignment="Center"
                                 Margin="0,0,0,30"/>

                        <!-- License Key Input -->
                        <ui:Card Padding="20" Margin="0,0,0,20">
                            <StackPanel>
                                <TextBlock Text="Enter License Key" 
                                         FontWeight="SemiBold" 
                                         Margin="0,0,0,10"/>
                                
                                <ui:TextBox x:Name="LicenseKeyBox" 
                                          PlaceholderText="XXXX-XXXX-XXXX-XXXX"
                                          FontFamily="Consolas"
                                          FontSize="14"
                                          Margin="0,0,0,15"/>

                                <ui:Button x:Name="ActivateLicenseButton"
                                         Content="Activate License"
                                         Icon="Key24"
                                         Appearance="Primary"
                                         HorizontalAlignment="Stretch"
                                         Click="ActivateLicense_Click"/>

                                <TextBlock x:Name="LicenseStatusText"
                                         Text=""
                                         Margin="0,10,0,0"
                                         HorizontalAlignment="Center"
                                         FontWeight="SemiBold"/>
                            </StackPanel>
                        </ui:Card>

                        <!-- Current Status -->
                        <ui:Card Padding="20">
                            <StackPanel>
                                <TextBlock Text="Current Status" 
                                         FontWeight="SemiBold" 
                                         Margin="0,0,0,10"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" 
                                             Text="License Type:" 
                                             Margin="0,0,10,5"
                                             Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" 
                                             x:Name="LicenseTypeText"
                                             Text="Free" 
                                             FontWeight="SemiBold"
                                             Margin="0,0,0,5"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" 
                                             Text="Features Available:" 
                                             Margin="0,0,10,5"
                                             Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" 
                                             x:Name="FeaturesCountText"
                                             Text="3 Webhooks" 
                                             FontWeight="SemiBold"
                                             Margin="0,0,0,5"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" 
                                             Text="Expires:" 
                                             Margin="0,0,10,0"
                                             Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                    <TextBlock Grid.Row="2" Grid.Column="1" 
                                             x:Name="ExpiryDateText"
                                             Text="Never" 
                                             FontWeight="SemiBold"/>
                                </Grid>
                            </StackPanel>
                        </ui:Card>

                        <!-- Info Box -->
                        <ui:InfoBar x:Name="ProInfoBar"
                                  Title="Premium Features Coming Soon"
                                  Message="Pro licenses will unlock additional webhook slots, advanced logging, and more features in future updates."
                                  IsOpen="True"
                                  Severity="Informational"
                                  IsClosable="False"
                                  Margin="0,20,0,0"/>
                    </StackPanel>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</ui:UiWindow>
